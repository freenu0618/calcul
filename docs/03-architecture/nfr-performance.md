# 비기능 요구사항 - 성능 및 운영

**작성일**: 2026-01-25
**버전**: 1.0.0
**프로젝트**: paytools.work

---

## 1. 성능 요구사항 (Performance Requirements)

### 1.1 API 응답시간

| API 엔드포인트 | P95 목표 | P99 목표 | 비고 |
|---------------|----------|----------|------|
| POST /api/v1/auth/login | < 300ms | < 500ms | JWT 발급 포함 |
| POST /api/v1/auth/register | < 500ms | < 800ms | DB 쓰기 포함 |
| POST /api/v1/salary/calculate | < 500ms | < 1000ms | 복잡한 계산 포함 |
| GET /api/v1/insurance/rates | < 100ms | < 200ms | 캐싱 적용 권장 |
| POST /api/v1/tax/calculate | < 200ms | < 400ms | 간이세액표 조회 |
| GET /actuator/health | < 50ms | < 100ms | 헬스체크 |

### 1.2 처리량 (Throughput)

| 지표 | 목표 | 비고 |
|------|------|------|
| 동시 사용자 | 100명 | Railway 기본 인스턴스 기준 |
| 초당 요청 (TPS) | 50 req/s | 피크 시간대 기준 |
| 일일 요청량 | 100,000건 | 예상 최대치 |

### 1.3 Rate Limiting

| 제한 | 값 | 적용 대상 |
|------|-----|----------|
| 분당 요청 | 60회 | IP 기반 |
| 시간당 요청 | 1,000회 | IP 기반 |
| 일일 요청 | 10,000회 | 미인증 사용자 |

---

## 2. 가용성 요구사항 (Availability Requirements)

### 2.1 서비스 가용성

| 지표 | 목표 | SLA |
|------|------|-----|
| 월간 가용성 | 99.5% | 최대 3.6시간/월 다운타임 |
| 연간 가용성 | 99.0% | 최대 3.65일/년 다운타임 |

### 2.2 복구 목표

| 지표 | 목표 | 설명 |
|------|------|------|
| RTO (Recovery Time Objective) | 1시간 | 장애 발생 후 복구까지 |
| RPO (Recovery Point Objective) | 1시간 | 최대 데이터 손실 허용 |

---

## 3. 확장성 요구사항 (Scalability Requirements)

### 3.1 수평 확장

| 항목 | 현재 | 목표 |
|------|------|------|
| 인스턴스 수 | 1 | 최대 3 (Railway) |
| 데이터베이스 | 단일 | 읽기 복제본 추가 가능 |

### 3.2 데이터 증가

| 항목 | 예상 증가율 | 대응 계획 |
|------|------------|----------|
| 사용자 수 | 월 10% | 인덱스 최적화 |
| 급여 계산 기록 | 월 1,000건 | 파티셔닝 검토 |

---

## 4. 보안 요구사항 (Security Requirements)

### 4.1 인증/인가

| 항목 | 구현 상태 | 설명 |
|------|----------|------|
| JWT 인증 | ✅ 완료 | Access Token 24시간 |
| 비밀번호 해싱 | ✅ 완료 | BCrypt |
| CORS | ✅ 완료 | 화이트리스트 방식 |
| Rate Limiting | ✅ 완료 | IP 기반 60회/분 |

### 4.2 데이터 보호

| 항목 | 구현 상태 | 설명 |
|------|----------|------|
| HTTPS | ✅ 완료 | Railway 자동 SSL |
| 민감 정보 마스킹 | ⬜ 대기 | 로그에서 비밀번호 제외 |
| SQL Injection 방지 | ✅ 완료 | JPA 파라미터 바인딩 |

---

## 5. 모니터링 요구사항 (Monitoring Requirements)

### 5.1 메트릭 수집

| 메트릭 | 수집 여부 | 도구 |
|--------|----------|------|
| API 응답시간 | ✅ | Actuator Metrics |
| 에러율 | ✅ | Railway Logs |
| DB 연결 상태 | ✅ | Health Indicator |
| JVM 메모리 | ✅ | Actuator Metrics |

### 5.2 알림 설정 (권장)

| 조건 | 알림 채널 | 우선순위 |
|------|----------|----------|
| 서비스 다운 | Slack/Email | Critical |
| 에러율 > 5% | Slack | High |
| 응답시간 > 2초 | Slack | Medium |
| 디스크 사용량 > 80% | Email | Low |

---

## 6. 백업 요구사항 (Backup Requirements)

### 6.1 데이터베이스 백업

| 항목 | 주기 | 보관 기간 |
|------|------|----------|
| 전체 백업 | 일 1회 | 7일 |
| 증분 백업 | 시간당 | 24시간 |
| 트랜잭션 로그 | 실시간 | 7일 |

### 6.2 복구 테스트

| 항목 | 주기 | 담당자 |
|------|------|--------|
| 복구 절차 테스트 | 분기 1회 | DevOps |
| 데이터 무결성 검증 | 월 1회 | 자동화 |

---

## 7. 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-01-25 | 1.0.0 | 초기 작성 - 전문가 패널 검토 결과 반영 |

---

**작성자**: Claude Code
**검토자**: Expert Spec Panel
